def getPythonBinary() {
    if (System.env['PYTHON_BIN'] != null) {
        return file("${System.getenv('PYTHON_BIN')}")
    } else {
        return file('/usr/local/bin/python3')
    }
}

python {
    docsDir = project.file('docs').path
    testDir = project.file('test').path
    srcDir = project.file('src').path
    setupCfg = project.file('src').path
    pinnedFile = project.file('pinned.txt') 
    pythonEnvironment = [:]
    pipConfig = [:]
    forceVersion('pypi', 'flake8', '3.2.1')

    details {
        virtualEnvPrompt = "(${project.name})"
        activateLink = project.file("activate")
        pythonVersion = '3.7'
        systemPythonInterpreter = getPythonBinary()
    }
}

repositories {
    pyGradlePyPi()
}